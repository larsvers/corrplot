<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Correlat3</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link
      href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;600;800&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="dist/bundle.css" />
  </head>
  <body>
    <div id="container">
      <canvas></canvas>
      <div id="controls">
        <div class="button-container action">
          <div class="button" id="full-grid">
            <div class="outer">
              <div class="inner"></div>
            </div>
          </div>
          <div class="button-text">Full grid</div>
        </div>

        <select
          name="highlight-corr"
          class="action"
          id="highlight-select"
        ></select>

        <div class="button-container action">
          <div class="button" id="reset-colour">
            <div class="outer">
              <div class="inner"></div>
            </div>
          </div>
          <div class="button-text">Reset colour</div>
        </div>

        <div class="button-container action">
          <div class="button toggle" id="auto-corr">
            <div class="outer glow-on">
              <div class="inner"></div>
            </div>
          </div>
          <div class="button-text">Auto corrleation</div>
        </div>

        <div class="button-container action">
          <div class="button toggle" id="lower-grid">
            <div class="outer glow-on">
              <div class="inner"></div>
            </div>
          </div>
          <div class="button-text">Lower grid</div>
        </div>

        <div class="button-container action">
          <div class="button toggle" id="tilt">
            <div class="outer glow-off">
              <div class="inner"></div>
            </div>
          </div>
          <div class="button-text">Tilt</div>
        </div>

        <div class="button-container action">
          <div class="button" id="show-quality">
            <div class="outer">
              <div class="inner"></div>
            </div>
          </div>
          <div class="button-text">Focus quality</div>
        </div>
      </div>

      <div id="text-container">
        <div id="header">
          <h1>Pruned Correlations</h1>
          <h3>Cutting to the essence of wine property relations</h3>
          <div class="scroll-arrow">
            ↓<br /><span class="lowlight">scroll</span>
          </div>
        </div>
        <div id="intro">
          <p>
            Data has a tendency to come in rows for observations and columns for
            variables, measures, metrics or whatever you might call it. Whenever
            I meet a new dataset, I am ambling along its columns to establish a
            profile for each of them. I move from column to column and spend a
            good moment to get to know it a little better &mdash; typically
            running frequencies, calculate normal values and check for missings.
          </p>
          <p>
            While this first meeting is more of a personal conversation under
            four eyes I try to get more social in the second gathering:
            understanding relations between variables. With numerical data one
            would typically bring a correlation matrix along, which gives us an
            overview of associations across all variables in a dataset.
          </p>
          <p>
            Recently, I've done so analysing 1,600 wines and their
            physiochemical properties &mdash; alcohol, sugars, chlorides (salt),
            pH Value, acids, etc. &mdash; in order to build a simple model aimed
            to predict a wine's quality.
          </p>
          <p id="section-0">
            In fact, there's a whole little visual story about these efforts
            over here, and originally this thingy here was supposed to be part
            of that story, but it didn't quite fit, so it gets its very own
            little stage.
          </p>
          <p>
            Be that as it may, the wine quality model we built over there is a
            <a
              href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC3936971"
              target="_blank"
              >Logistic Regression</a
            >
            &mdash; a general linear model, which comes with the benefit of
            being relatively simple to explain because what it does in essence
            is modelling correlations between &mdash; in our case &mdash;
            numeric variables. To get an inital overview of correlations in your
            dataset, you could get a correlation matrix that would look
            something like this:
          </p>
        </div>
        <div id="main">
          <p id="section-1">
            Correlation matrices are helpful and they do the job. Seeing a
            correlation matrix for the first time, you might have to get your
            bearings a little, but once that's done it's a quick and efficient
            read:
            <br /><br />all your variables are in the rows
            <strong>AND</strong> in the columns and the circles encode the
            correlation strength with size and lightness as well as the
            correlation direction with the circle's hue.
            <span class="orange">Orange</span> for negative and
            <span class="blue">blue</span> for positive correlations in this
            case. <br /><br />This is all you need to know to efficiently look
            up each correlation of interest like for example the correlation
            between a wine's pH values and Citric Acid,
          </p>
          <p id="section-empty">
            which &mdash; given the orange tint &mdash; seems to be negative,
            and of significant size with -0.54 in this case.
          </p>
          <p id="section-2">
            Or between alcohol and density, also negative, telling us that the
            higher the alcohol → the lower the density.
          </p>
          <p id="section-3">
            Or between the all important wine quality and alcohol, which &mdash;
            maybe unsurpsingly &mdash; is positive. The higher the alcohol → the
            higher the quality (we can sense the limits of correlations in
            reality here as there's probably a tipping point a simple
            correlation won't capture).
          </p>
          <p id="section-4">
            As nice and efficient as this all is, it carries some slack, we can
            prune away; like for example the diagonal of auto-correlations. It
            is sort of pretty obvious that each variable is perfectly positively
            correlated with itself. So let's chop it off..
          </p>
          <p id="section-empty">
            There are
            <a
              href="https://www.r-graph-gallery.com/199-correlation-matrix-with-ggally.html"
              target="_blank"
              >great</a
            >
            <a
              href="https://cran.r-project.org/web/packages/corrplot/vignettes/corrplot-intro.html"
              target="_blank"
              >visualisation</a
            >
            <a
              href="https://seaborn.pydata.org/examples/many_pairwise_correlations.html"
              target="_blank"
              >packages</a
            >
            out there, some of which use this space to show for example the
            density distribution of that variable, but to keep it minimal we're
            just removing it here.
          </p>
          <p id="section-5">
            But there's more to cut. In fact, more than half of the matrix can
            go, as the bottom right is just a reflection of the upper left.
          </p>
          <p id="section-6">
            This is it, I guess. To get a full overview, we can't really cut
            away anything else. We can tilt it into a correlation pyramid for
            different aesthetics,
          </p>
          <p id="section-7">
            ...but that's a matter of taste. <br /><br />Now, the reason I
            started climbing down the correlation matrix basement to start with,
            was a faint call from the 3rd dimension. Whenever I look at
            correlation matrices, my inner eye doesn't only see circles encoding
            correlation strength and direction but bars, or cylinders pointing
            up or down. We can't see them as we're looking straight down onto
            its flat surface, but I thought they might be worth to be excavated.
            <br /><br />It turns out the 3rd dimension isn't all too helpful
            when you have a full matrix &mdash; as you can't see the tree for
            the forest, as it were. Too busy. <br /><br />BUT our particular
            interest in the data (full story over here, I won't mention it
            again, thank you very much) is on correlation of all variables with
            just a single variable: the wine quality! <br /><br />So, focussing
            in on quality...
          </p>
          <p id="section-8">
            we can now add a length encoding to the circles' hue and lightness,
            by turnining the circles into cylinders...
          </p>
          <p id="section-empty">
            Nice! Redundant encodings are good for efficiency they tought us in
            visual data school, and here we have some possibly beneficial
            redundancy. <br /><br />Now it's your turn to take this for a spin.
            Just continue to scroll and wait for the big white
            <a href="https://en.wikipedia.org/wiki/Dieter_Rams">Dieter Rams</a>
            inspired button (totally unrelated &mdash; has nothing to do with
            anything) to interact with that matrix in 3 dimensions....
          </p>
        </div>
        <div id="play">
          <div id="big-button-wrap">
            <div id="big-button-container">
              <div id="big-button-outer">
                <div id="big-button-inner">
                  <div id="big-button-rim">
                    <div id="big-button-bulb"></div>
                  </div>
                </div>
              </div>
            </div>
            <div id="big-button-text">Interact</div>
          </div>
        </div>
      </div>
    </div>

    <script src="dist/bundle.js"></script>
  </body>
</html>
